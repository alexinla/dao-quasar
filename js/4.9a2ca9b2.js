(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{3595:function(e,t,a){},"7eef":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-py-md q-px-xl main"},[a("div",{staticClass:"section"},[a("div",{staticClass:"title text-weight-bold"},[e._v("组长")]),a("div",{staticClass:"manage"},[a("member",{attrs:{members:[e.owner]}}),e.canManage?a("q-btn",{staticClass:"manage-btn",attrs:{outline:"",label:this.editMember?"停止编辑":"管理组员",color:this.editMember?"negative":"primary"},on:{click:e.edit}}):e._e()],1)]),a("div",{staticClass:"section"},[a("div",{staticClass:"title text-weight-bold"},[e._v("所有成员")]),a("member",{attrs:{members:e.pagedAliveMember,edit:e.editMember},on:{changeBlockStatus:e.changeBlockStatus}})],1),a("div",{staticClass:"q-pa-md flex flex-center"},[a("q-pagination",{attrs:{max:e.maxPage,"max-pages":9,"boundary-numbers":!0,"direction-links":!0,color:"primary"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}}),a("span",{staticClass:"total"},[e._v("共"+e._s(this.aliveMember.length)+"人")])],1),a("div",[a("div",{staticClass:"title text-weight-bold"},[e._v("小黑屋")]),a("member",{attrs:{members:e.blockMember,edit:e.editMember,blocked:!0},on:{changeBlockStatus:e.changeBlockStatus}})],1)])},r=[],s=(a("20d6"),a("967e")),n=a.n(s),c=(a("96cf"),a("fa84")),o=a.n(c),l=a("eeee"),u={components:{member:l["a"]},props:{id:String},computed:{owner:function(){return this.$store.state.group.currentGroupOwner},canManage:function(){return this.$store.state.group.currentGroupOwner.id===this.$store.state.user.userid},maxPage:function(){return this.aliveMember.length&&Math.floor(this.aliveMember.length/this.pageSize)+1},pagedAliveMember:function(){return this.aliveMember.slice((this.currentPage-1)*this.pageSize,this.currentPage*this.pageSize)}},data:function(){return{currentPage:1,aliveMember:[],blockMember:[],editMember:!1,pageSize:30}},created:function(){this.$store.dispatch("group/jumpToGroup",{id:this.id}),this.getMembers(this.id)},methods:{getMembers:function(e){var t=this;return o()(n.a.mark((function a(){var i,r;return n.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i="/user/members/"+e,a.next=3,t.$axios.get(i);case 3:r=a.sent,0==r.data.code&&(t.aliveMember=r.data.data.alive,t.blockMember=r.data.data.blocked);case 5:case"end":return a.stop()}}),a)})))()},changeBlockStatus:function(e){var t=e.userId,a=e.type;if("block"===a){var i=this.aliveMember.findIndex((function(e){return e.id===t}));this.blockMember.push(this.aliveMember[i]),this.aliveMember.splice(i,1)}else if("unblock"===a){var r=this.blockMember.findIndex((function(e){return e.id===t}));this.aliveMember.push(this.blockMember[r]),this.blockMember.splice(r,1)}},edit:function(){this.editMember=!this.editMember}}},m=u,b=(a("a537"),a("2877")),d=a("eebe"),h=a.n(d),p=a("2c91"),g=a("9c40"),v=a("3b16"),f=Object(b["a"])(m,i,r,!1,null,"2764f76a",null);t["default"]=f.exports;h()(f,"components",{QSpace:p["a"],QBtn:g["a"],QPagination:v["a"]})},a537:function(e,t,a){"use strict";var i=a("3595"),r=a.n(i);r.a}}]);