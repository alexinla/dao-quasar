(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"0842":function(t,e,n){"use strict";var a=n("69b4"),s=n.n(a);s.a},"3c8d":function(t,e,n){},"41fc":function(t,e,n){},"488d":function(t,e,n){"use strict";var a=n("41fc"),s=n.n(a);s.a},"623e":function(t,e,n){"use strict";var a=n("3c8d"),s=n.n(a);s.a},"69b4":function(t,e,n){},ae5a:function(t,e,n){"use strict";var a=n("fda8"),s=n.n(a);s.a},b15d:function(t,e,n){},ef4b:function(t,e,n){"use strict";var a=n("b15d"),s=n.n(a);s.a},f699:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main"},[null!==t.targetCommentPost?n("AddComment",{attrs:{targetPost:t.targetCommentPost,onSave:t.onAddComment},model:{value:t.addCommentShow,callback:function(e){t.addCommentShow=e},expression:"addCommentShow"}}):t._e(),n("Upload",{ref:"upload",on:{uploaded:t.uploaded,uploading:t.uploading}}),n("div",{staticClass:"hover-color"}),n("div",{staticClass:"row no-wrap items-end title"},[n("q-avatar",{staticClass:"avatar",on:{click:t.changeAvatar}},[n("q-icon",{directives:[{name:"show",rawName:"v-show",value:t.editing,expression:"editing"}],staticClass:"mask",attrs:{name:"icon_paizhao"}}),n("img",{class:{masked:t.editing},attrs:{src:(t.editing?t.edit.avatar:t.userinfo.avatar)||"statics/user.svg"}})],1),n("div",{staticClass:"userinfo"},[n("div",{staticClass:"row relative-position"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.editing,expression:"editing"}]},[n("q-input",{attrs:{square:"",outlined:"",dense:""},model:{value:t.edit.name,callback:function(e){t.$set(t.edit,"name",e)},expression:"edit.name"}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:t.editing,expression:"editing"}]},[n("q-btn",{staticClass:"btn",attrs:{outline:"",color:"primary",label:"取消"},on:{click:function(e){t.editing=!1}}}),n("q-btn",{staticClass:"btn",attrs:{unelevated:"",color:"primary",label:"保存",disable:t.loadingVisible},on:{click:t.save}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.editing,expression:"!editing"}],staticClass:"username"},[t._v(t._s(this.userinfo.name||this.userinfo.mail_export))]),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.editing,expression:"!editing"}]},[n("IconHover",{directives:[{name:"show",rawName:"v-show",value:t.isMyself,expression:"isMyself"}],staticClass:"cursor-pointer",staticStyle:{"padding-top":"8px"},attrs:{iconName:"bianji",width:"16px"},nativeOn:{click:function(e){return t.clickEdit(e)}}})],1),n("q-inner-loading",{attrs:{showing:t.loadingVisible}},[n("q-spinner-gears",{attrs:{size:"50px",color:"primary"}})],1)],1),n("div",{staticClass:"q-size-sm"},[t._v("DAO ID "+t._s(t.id)+" "+t._s(t.userinfo.mail_export))])])],1),n("div",{staticClass:"row q-col-gutter-md"},[n("div",{staticClass:"col-sm-8 col-md-6 offset-md-1"},[n("q-card",{staticClass:"my-card",attrs:{flat:""}},[n("q-tab-panels",{attrs:{animated:"","transition-prev":"fade","transition-next":"fade"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[n("q-tab-panel",{staticClass:"posts",attrs:{name:"myPosts"}},t._l(t.pullList,(function(e){return n("ArticleShow",{key:e.post.id,attrs:{post:e,personPage:!0,addComment:function(){return t.showAddComment(e.post.id)}},on:{del:t.postDeleted}})})),1)],1)],1)],1),n("div",{staticClass:"col-sm-4 col-md-4"},[t.isMyself?n("PersonWallet",{attrs:{tokens:t.tokens}}):n("PersonGroupList",{attrs:{user_id:t.id}})],1)])],1)},s=[],i=(n("8e6e"),n("8a81"),n("ac6a"),n("cadf"),n("456d"),n("c47a")),o=n.n(i),r=(n("7f7f"),n("20d6"),n("7514"),n("551c"),n("06db"),n("967e")),c=n.n(r),u=(n("96cf"),n("fa84")),l=n.n(u),d=n("b95e"),p=n("e019"),m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-card",{staticClass:"my-card",attrs:{flat:""}},[n("moneyIn",{model:{value:t.showMoneyIn,callback:function(e){t.showMoneyIn=e},expression:"showMoneyIn"}}),n("moneyOut",{attrs:{tokens:t.tokens,currentToken:t.currentToken},model:{value:t.showMoneyOut,callback:function(e){t.showMoneyOut=e},expression:"showMoneyOut"}}),n("q-card-section",{staticClass:"row no-wrap title"},[n("span",{staticClass:"title-name"},[t._v("我的钱包")]),n("q-space"),n("IconHover",{staticClass:"cursor-pointer",attrs:{iconName:"code",width:"30px"},nativeOn:{click:function(e){t.showMoneyIn=!0}}}),n("IconHover",{staticClass:"cursor-pointer",staticStyle:{"margin-left":"60px"},attrs:{iconName:"zhuanzhang",width:"30px"},nativeOn:{click:function(e){t.showMoneyOut=!0}}})],1),n("q-card-section",{staticClass:"text-center"},[n("q-btn",{attrs:{"no-caps":"",flat:"",label:"总金额 ("+t.currentToken.name+")▽"}},[n("q-menu",{attrs:{"auto-close":""}},[n("q-list",{staticStyle:{"min-width":"100px"}},t._l(t.tokens,(function(e){return n("div",{key:e.id},[n("q-item",{attrs:{clickable:""},on:{click:function(n){return t.pickToken(e)}}},[n("q-item-section",[t._v(t._s(e.contract.name))])],1),n("q-separator")],1)})),0)],1)],1),n("div",{staticClass:"value1"},[t._v(t._s(t.currentToken.value))]),n("div",{staticClass:"value2"},[t._v("$ "+t._s(t.priceOf(t.currentToken)))])],1),n("q-card-section",[n("q-list",{staticClass:"money-detail"},t._l(t.log,(function(e){return n("div",{key:e.key},[n("q-item",[n("q-item-section",[n("q-item-label",{staticClass:"detail-big"},[t._v(t._s(e.token_log.note))]),n("q-item-label",{staticClass:"detail-small",attrs:{caption:""}},[t._v(t._s(t.$utils.timeStringToLocal(e.token_log.create_at,"Accurate")))])],1),n("q-item-section",{attrs:{side:""}},[n("q-item-label",{staticClass:"detail-big"},[t._v(t._s(e.token_log.value))]),n("q-item-label",{staticClass:"detail-small",attrs:{caption:""}},[t._v("$ "+t._s(t.priceOf({name:e.contract.name,value:e.token_log.value})))])],1)],1)],1)})),0)],1)],1)},f=[],h=(n("c5f6"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-dialog",{model:{value:t.shouldShow,callback:function(e){t.shouldShow=e},expression:"shouldShow"}},[n("div",{staticClass:"main text-center"},[n("div",{staticClass:"top"},[n("div",{staticClass:"text-h5"},[t._v("扫一扫，向我转账")]),n("div",[t._v("此钱包仅限接受ERC20代币，转入其它代币会造成永久损失")]),n("qrcode-vue",{attrs:{value:t.address,size:t.size,level:"H"}})],1),n("div",{staticClass:"bottom"},[n("div",[t._v("钱包地址")]),n("div",[t._v("\n        "+t._s(t.address)+"\n        "),n("q-btn",{attrs:{flat:"",color:"primary",label:"复制"},on:{click:t.copy}})],1)])])])}),v=[],g=n("d7b0"),b=n("cdde"),k={components:{QrcodeVue:g["a"]},props:{value:Boolean},data:function(){return{size:200}},watch:{},computed:{address:function(){return this.$store.state.user.address},shouldShow:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{copy:function(){var t=this;Object(b["a"])(this.address).then((function(){t.$q.notify("钱包地址已复制到剪切板")})).catch((function(){t.$q.notify("浏览器不支持，请手动复制地址")}))}},created:function(){},mounted:function(){}},w=k,y=(n("0842"),n("2877")),_=n("eebe"),q=n.n(_),x=n("24e8"),C=n("9c40"),$=Object(y["a"])(w,h,v,!1,null,"74e6a556",null),O=$.exports;q()($,"components",{QDialog:x["a"],QBtn:C["a"]});var Q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-dialog",{model:{value:t.shouldShow,callback:function(e){t.shouldShow=e},expression:"shouldShow"}},[n("div",{staticClass:"main"},[n("div",{staticClass:"text-h5"},[t._v("钱包转账")]),n("div",[t._v("转出地址")]),n("div",[n("q-input",{staticClass:"myinput",attrs:{outlined:"",dense:"",placeholder:"请输入 +ERC20 钱包地址/DAO ID"},model:{value:t.user,callback:function(e){t.user=e},expression:"user"}})],1),n("div",[t._v("\n      转出金额\n      "),n("q-btn",{attrs:{"no-caps":"",flat:"",label:"单位 ("+t.currentToken.contract.name+")▽"}},[n("q-menu",{attrs:{"auto-close":""}},[n("q-list",{staticStyle:{"min-width":"100px"}},t._l(t.tokens,(function(e,a){return n("div",{key:e.id},[n("q-item",{attrs:{clickable:""},on:{click:function(e){return t.pickToken(a)}}},[n("q-item-section",[t._v(t._s(e.contract.symbol))])],1),n("q-separator")],1)})),0)],1)],1)],1),n("div",[n("q-input",{staticClass:"col",attrs:{outlined:"",dense:"",placeholder:"可转出余额"+t.currentToken.token.value},scopedSlots:t._u([{key:"append",fn:function(){return[n("q-btn",{attrs:{flat:"",color:"primary",label:"全部"},on:{click:t.inputAll}})]},proxy:!0}]),model:{value:t.val,callback:function(e){t.val=e},expression:"val"}})],1),n("div",[n("q-btn",{staticClass:"col",attrs:{color:"primary",label:"确定",loading:t.loading,disable:""===this.user||""===this.val},on:{click:t.sentMoney}})],1),n("div",{staticClass:"col"},[t._v("转账手续费（约0.001ETH）将从你的ETH钱包直接扣除。")])])])},S=[],I={props:{value:Boolean,tokens:Array},data:function(){return{val:"",contract:"",user:"",totalMoney:0,tokenIndex:0,loading:!1}},watch:{},computed:{shouldShow:{get:function(){return this.value},set:function(t){this.$emit("input",t)}},currentToken:function(){return this.tokens[this.tokenIndex]}},methods:{inputAll:function(){this.val=this.currentToken.token.value},sentMoney:function(){var t=this;return l()(c.a.mark((function e(){var n,a,s;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n="protected/user/token/transfer",a={contract:t.currentToken.contract.contract,to_user:t.user,value:t.val},t.val&&!isNaN(Number(t.val))&&0!==Number(t.val)){e.next=5;break}return t.$q.notify("金额不合法"),e.abrupt("return");case 5:if(!(Number(t.val)>Number(t.currentToken.token.value))){e.next=8;break}return t.$q.notify("余额不足"),e.abrupt("return");case 8:if(!(t.user.length>=5||"0x"===t.user.substring(0,2))){e.next=11;break}e.next=13;break;case 11:return t.$q.notify("地址不合法"),e.abrupt("return");case 13:return t.loading=!0,e.next=16,t.$axios.post(n,a);case 16:s=e.sent,t.loading=!1,t.shouldShow=!1,0===s.data.code?t.$q.notify({message:"转账成功"}):100===s.data.code?t.$q.notify("错误"+s.data.message):104===s.data.code&&(t.$q.notify({message:"认证失效，请重新登录"}),t.$showLogin());case 20:case"end":return e.stop()}}),e)})))()},pickToken:function(t){this.tokenIndex=t}},created:function(){},mounted:function(){}},P=I,T=(n("488d"),n("27f9")),L=n("4e73"),M=n("1c1c"),j=n("66e5"),A=n("4074"),N=n("eb85"),E=Object(y["a"])(P,Q,S,!1,null,"cb365f04",null),D=E.exports;q()(E,"components",{QDialog:x["a"],QInput:T["a"],QBtn:C["a"],QMenu:L["a"],QList:M["a"],QItem:j["a"],QItemSection:A["a"],QSeparator:N["a"]});var G={components:{moneyIn:O,moneyOut:D},props:{tokens:Array},data:function(){return{currentToken:{name:"",contract:"",value:"0.00"},showMoneyIn:!1,showMoneyOut:!1,log:[],quotes:[]}},watch:{tokens:function(t){t&&t.length&&this.pickToken(t[0])}},computed:{},methods:{pickToken:function(t){this.currentToken={name:t.contract.name,symbol:t.contract.symbol,contract:t.contract.contract,value:t.token.value},this.tokenLog(t.contract.contract)},tokenLog:function(){var t=l()(c.a.mark((function t(e){var n,a,s;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="protected/user/token/logs",a={contract:e,base_token_log:null},t.next=4,this.$axios.post(n,a);case 4:s=t.sent,0==s.data.code?this.log=s.data.data.token_logs:this.$q.notify(s.data.message);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),priceOf:function(t){var e=t.name,n=t.value;return Math.floor(Number(n)*this.getPrice(e)*1e3)/1e3},getPrice:function(t){if(!this.quotes){var e=[{name:"Ethereum",value:200}];this.quotes=e,this.$q.localStorage.set("quotes",e)}var n=this.quotes.find((function(e){return e.name===t}));return n&&n.value||0}},created:function(){this.tokens&&this.tokens.length&&this.pickToken(this.tokens[0]),this.quotes=this.$q.localStorage.getItem("quotes")},mounted:function(){}},z=G,U=(n("ef4b"),n("f09f")),R=n("a370"),B=n("2c91"),H=n("0170"),V=Object(y["a"])(z,m,f,!1,null,"f0812b54",null),J=V.exports;q()(V,"components",{QCard:U["a"],QCardSection:R["a"],QSpace:B["a"],QBtn:C["a"],QMenu:L["a"],QList:M["a"],QItem:j["a"],QItemSection:A["a"],QSeparator:N["a"],QItemLabel:H["a"]});var W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-card",{staticClass:"container",attrs:{flat:""}},[n("q-list",{staticClass:"rounded-borders"},t._l(t.recommendGroups,(function(e){return n("div",{key:e.id},[n("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],class:["group-list"],attrs:{clickable:""},on:{click:function(n){return t.jumpToGroup(e.id)}}},[n("q-item-section",{attrs:{avatar:""}},[n("q-avatar",{attrs:{rounded:"",size:"50px"}},[n("img",{attrs:{src:e.avatar||"statics/group.svg"}})])],1),n("q-item-section",[n("q-item-label",{attrs:{lines:"1"}},[n("span",{staticClass:"group-title"},[t._v(t._s(e.name))])]),n("q-item-label",{attrs:{caption:"",lines:"1"}},[t._v(t._s(e.desc_text))])],1),n("q-item-section",{staticClass:"justify-between",attrs:{side:"",top:""}},[2===e.read_permission?n("q-icon",{attrs:{name:"img:statics/icons/icon_suo_2.svg",size:"xs"}}):n("q-item-label",{staticClass:"badge-num"},[t._v(t._s(e.num_post))]),n("q-item-label",{attrs:{caption:""}},[t._v(t._s(t.$utils.timeStringToLocal(e.last_post_at,"RelativeDay")))])],1)],1),n("q-separator",{attrs:{inset:"true"}})],1)})),0)],1)},F=[],K=n("4db1"),X=n.n(K),Y={inject:["reload"],components:{},props:{user_id:String},data:function(){return{recommendGroups:[],lastGroupId:null,hasMore:!0}},created:function(){this.init()},watch:{},computed:{},methods:{jumpToGroup:function(t){var e=this;return l()(c.a.mark((function n(){return c.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.$router.push("/group/"+t).catch((function(){}));case 1:case"end":return n.stop()}}),n)})))()},init:function(){var t=this;this.getReCommendGroups().then((function(e){var n;e.length&&(n=t.recommendGroups).push.apply(n,X()(e))}))},getReCommendGroups:function(){var t=this;return new Promise((function(e,n){var a="/grp/joined",s={user_id:+t.user_id};t.$axios.post(a,s).then((function(t){if(0==t.data.code){var a=t.data.data.grps_joined.map((function(t){return t.grp}));e(a)}else n([])})).catch((function(){n([])}))}))}}},Z=Y,tt=(n("ae5a"),n("cb32")),et=n("0016"),nt=n("714f"),at=Object(y["a"])(Z,W,F,!1,null,"e19213d4",null),st=at.exports;q()(at,"components",{QCard:U["a"],QList:M["a"],QItem:j["a"],QItemSection:A["a"],QAvatar:tt["a"],QItemLabel:H["a"],QIcon:et["a"],QSeparator:N["a"]}),q()(at,"directives",{Ripple:nt["a"]});var it=n("d443");function ot(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function rt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ot(Object(n),!0).forEach((function(e){o()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ct={components:{ArticleShow:d["a"],PersonWallet:J,PersonGroupList:st,AddComment:p["a"],Upload:it["a"]},props:{id:String},data:function(){return{tab:"myPosts",mycode:[],tokens:[{contract:{contract:"",name:"",symbol:""},token:{contract:"",user:0,value:"0.00"}}],pullList:[],userinfo:{},edit:{name:"",avatar:""},addCommentShow:!1,commentPostId:0,targetCommentPost:null,editing:!1,uploadAvatar:!1,recycleInited:!1,recycleList:[],loadingVisible:!1}},watch:{id:function(){this.init()}},computed:{myUserinfo:function(){return this.$store.state.user},isMyself:function(){return this.myUserinfo.userid==this.id}},methods:{init:function(){var t=this.$store.state.user.userid;t?this.isMyself?(this.userinfo=this.myUserinfo,this.getMyPosts(),this.getmycode()):(t=this.id,this.getOtherUser(t),this.getOtherPosts(t)):(this.$q.notify({message:"认证失效，请重新登录"}),this.$showLogin())},getMyRecycle:function(){var t=this;return l()(c.a.mark((function e(){var n,a;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="protected/post/my/pull",e.next=3,t.$axios.post(n,{base_post:null,deleted:!0});case 3:a=e.sent,0==a.data.code&&(t.recycleList=[],t.recycleList=a.data.data.posts);case 5:case"end":return e.stop()}}),e)})))()},getOtherUser:function(){var t=l()(c.a.mark((function t(e){var n,a;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="/user/"+e,t.next=3,this.$axios.get(n);case 3:a=t.sent,0==a.data.code?this.userinfo=a.data.data.user:a.code;case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getmycode:function(){var t=l()(c.a.mark((function t(){var e,n;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e="protected/user/tokens",t.next=3,this.$axios.get(e,{});case 3:n=t.sent,0==n.data.code?this.tokens=n.data.data.tokens:n.data.code;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getLikes:function(t){var e=this;return new Promise((function(n,a){var s=t.map((function(t){return t.post.id}));if(0===s.length)return n(t);e.$axios.post("/protected/post/likes",{posts:s}).then((function(e,a){if(a)n(t);else{var s=e.data.data.likes;t.forEach((function(t){var e=void 0===s[t.post.id]?1:s[t.post.id];t.likeStatus=e})),n(t)}})).catch((function(){a(t)}))}))},getMyPosts:function(){var t=l()(c.a.mark((function t(){var e,n;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e="protected/post/my/pull",t.next=3,this.$axios.post(e,{base_post:null,deleted:!1});case 3:if(n=t.sent,0!=n.data.code){t.next=9;break}return this.pullList=[],t.next=8,this.getLikes(n.data.data.posts);case 8:this.pullList=t.sent;case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getOtherPosts:function(t){var e=this;return l()(c.a.mark((function n(){var a,s,i;return c.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.userinfo.userid?"/protected/post/other/pull":"/post/other/pull",s={base_post:null,creator:t-0},n.next=4,e.$axios.post(a,s);case 4:i=n.sent,0==i.data.code&&(e.pullList=[],e.pullList=i.data.data.posts);case 6:case"end":return n.stop()}}),n)})))()},showAddComment:function(t){this.targetCommentPost=this.pullList.find((function(e){return e.post.id===t})),this.addCommentShow=!0},onAddComment:function(){this.targetCommentPost.post.num_comment+=1},postDeleted:function(t){var e=this.pullList.findIndex((function(e){return e.post.id===t}));this.pullList.splice(e,1)},clickEdit:function(){this.editing=!this.editing,this.edit.name=this.userinfo.name,this.edit.avatar=this.userinfo.avatar},changeAvatar:function(){this.editing&&this.$refs.upload.upload()},uploading:function(){this.loadingVisible=!0},uploaded:function(t){t.err||(this.edit.avatar=t.url),this.loadingVisible=!1,this.$q.notify("头像上传成功")},save:function(){var t=this;return l()(c.a.mark((function e(){var n,a,s,i;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="/protected/user/modify",a={name:t.edit.name,avatar:t.edit.avatar},e.next=4,t.$axios.put(n,a);case 4:s=e.sent,0===s.data.code?(t.$q.notify("资料修改成功"),i=rt({},t.userinfo),i.name=a.name,i.avatar=a.avatar,t.$store.commit("user/setUserinfo",i)):t.$q.notify("资料修改失败"),t.editing=!1;case 7:case"end":return e.stop()}}),e)})))()}},created:function(){this.init()},mounted:function(){}},ut=ct,lt=(n("623e"),n("74f7")),dt=n("cf57"),pt=n("429b"),mt=n("7460"),ft=n("adad"),ht=n("823b"),vt=Object(y["a"])(ut,a,s,!1,null,"b6fa5aa4",null);e["default"]=vt.exports;q()(vt,"components",{QAvatar:tt["a"],QIcon:et["a"],QInput:T["a"],QBtn:C["a"],QInnerLoading:lt["a"],QSpinnerGears:dt["a"],QCard:U["a"],QTabs:pt["a"],QTab:mt["a"],QTabPanels:ft["a"],QTabPanel:ht["a"]})},fda8:function(t,e,n){}}]);