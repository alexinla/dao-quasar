(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{4252:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main"},[null!==t.targetCommentPost?n("AddComment",{attrs:{targetPost:t.targetCommentPost,onSave:t.onAddComment},model:{value:t.addCommentShow,callback:function(e){t.addCommentShow=e},expression:"addCommentShow"}}):t._e(),t.userid?n("div",{staticClass:"top-login"},[n("headerBarRight")],1):n("q-btn",{directives:[{name:"require-login-click",rawName:"v-require-login-click"}],staticClass:"top-login",attrs:{color:"primary",flat:"",label:"快速登录"}}),n("div",{staticClass:"groupinfo"},[n("div",{staticClass:"groupinfo_row"},[n("q-avatar",{attrs:{rounded:"",size:"50px"}},[n("img",{attrs:{src:t.group.avatar||"statics/group.svg"}})]),n("span",{staticClass:"groupname",on:{click:function(e){return t.$router.push("/manage/"+t.group.id)}}},[t._v(t._s(t.group.name))]),n("q-btn",{staticClass:"btn-fixed-width shareBtn",attrs:{flat:"",align:"around"},on:{click:t.shareUrl}},[n("svg",{class:"svg-icon svg-icon--light-grey svg-icon--hover-middle-grey mr5",attrs:{width:"16",height:"14",viewBox:"0 0 16 14",xmlns:"http://www.w3.org/2000/svg","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[n("path",{attrs:{d:"M3.3 9c3.163-3.73 7.804-2.944 7.804-2.944v2.976L16 4.516 11.104 0v2.996C3.759 2.944 3.3 9 3.3 9zM1.636 2H6.86V.326H.005v1.673h1.199L0 2.01v10.047l1.636.002V2zm11.419 10.06H.003v1.67h13.052v-.001l1.63.002V9.039h-1.63v3.02z",fill:"#E4E4E4","fill-rule":"nonzero"}})]),n("span",[t._v("分享")])])],1),n("div",{staticClass:"groupinfo_row"},[t.groupJoined?t._e():n("JoinGroupBtn",{ref:"join",attrs:{groupInfo:t.group}}),t.blocked?n("q-btn",{attrs:{unelevated:"",rounded:"",dense:"","text-color":"red-7",color:"red-1",label:"已被禁言",disable:""}}):n("AddArticleBtn",{attrs:{groupId:t.groupId,onSave:t.onAddArticle},on:{wantJoin:t.wantJoin}})],1)]),n("div",{staticClass:"wrapper"},[n("div",{staticClass:"info"},[n("span",{staticClass:"infotitle"},[t._v("创建于"+t._s(t.$utils.timeStringToLocal(t.group.create_at,"Accurate")))]),n("span",{staticClass:"infotitle"},[t._v("组长："+t._s(t.owner.name))]),n("span",{staticClass:"reward"},[t._v("入群奖励"+t._s(t.group.reward_join)+" "+t._s(t.reward_type))]),n("span",{staticClass:"reward"},[t._v("发帖奖励"+t._s(t.group.reward_post)+" "+t._s(t.reward_type))]),n("div",{staticClass:"desc"},t._l(t.desc_breakLines,(function(e){return n("div",{key:e.id},[t._v(t._s(e||" "))])})),0)]),n("div",{staticClass:"members"},[n("member",{staticClass:"members_content",attrs:{members:t.grpMembers,size:"35px"}}),n("span",{staticClass:"members_action"},[n("q-btn",{attrs:{flat:"",color:"primary","no-caps":"",size:"13px"},on:{click:function(e){return t.$router.push("/manage/"+t.group.id)}}},[t._v("\n          查看更多\n          "),n("br"),t._v("\n          ("+t._s(t.grpMembers.length)+")\n        ")])],1)],1),t.hasPermission?n("q-infinite-scroll",{staticClass:"listContainer",attrs:{offset:250},on:{load:t.loadMore},scopedSlots:t._u([{key:"loading",fn:function(){return[n("div",{staticClass:"row justify-center q-my-md"},[n("q-spinner-dots",{attrs:{color:"primary",size:"40px"}})],1)]},proxy:!0}],null,!1,3159847669)},t._l(t.posts,(function(e){return n("div",{key:e.post.id},[n("ArticleShow",{attrs:{post:e,addComment:function(){return t.showAddComment(e.post.id)},groupCreatorId:t.owner.id},on:{del:t.postDeleted,edit:t.postEdited}})],1)})),0):n("div",{staticClass:"noPermission"},[n("img",{staticClass:"noPermission_icon",attrs:{src:s("caf3")}}),n("div",{staticClass:"noPermission_tip"},[t._v("加入小组才能查看")])])],1),n("JoinGroup",{attrs:{groupId:t.groupId},on:{wantJoin:t.wantJoin},model:{value:t.showJoinGroup,callback:function(e){t.showJoinGroup=e},expression:"showJoinGroup"}})],1)},r=[],o=(s("7f7f"),s("20d6"),s("551c"),s("ac6a"),s("cadf"),s("06db"),s("5df3"),s("f751"),s("7514"),s("967e")),i=s.n(o),a=(s("96cf"),s("fa84")),u=s.n(a),c=(s("28a5"),s("b95e")),d=s("3b4c"),p=s("bea7"),l=s("cbd7"),h=s("fa0e"),m=s("e019"),f=s("eeee"),g=s("cdde"),b=s("97af"),v=function(t){return Object(b["b"])("/post/pull",t).then((function(t){return t.posts.forEach((function(t){t.likeStatus=1})),t}))},w=function(t){return Object(b["b"])("/protected/post/pull",t).then(function(){var t=u()(i.a.mark((function t(e){var s,n;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==e.posts.length){t.next=2;break}return t.abrupt("return",e);case 2:return s=e.posts.map((function(t){return t.post.id})),t.next=5,Object(b["b"])("/protected/post/likes",{posts:s}).then((function(t){return t.likes}));case 5:return n=t.sent,e.posts.forEach((function(t){var e=void 0===n[t.post.id]?1:n[t.post.id];t.likeStatus=e})),t.abrupt("return",e);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},k=function(t){var e=t.userid,s=t.groupId,n=t.lastPostId,r={grp:s,base_post:n};return e?w(r):v(r)},C=k,A={components:{AddComment:m["a"],AddArticleBtn:p["a"],JoinGroupBtn:l["a"],JoinGroup:h["a"],member:f["a"],ArticleShow:c["a"],headerBarRight:d["a"]},props:{},data:function(){return{isReady:!1,hasPermission:!0,hasMore:!0,posts:[],lastPostId:null,targetCommentPost:null,addCommentShow:!1,grpMembers:[],password:"",blockedMembers:[],showJoinGroup:!1}},watch:{groupId:function(){this.fetchGroupData()}},computed:{userid:function(){return this.$store.state.user.userid},groupId:function(){return+this.$route.params.id},group:function(){return this.$store.state.group.currentGroup},owner:function(){return this.$store.state.group.currentGroupOwner},reward_type:function(){return this.$store.state.group.currentGroup.contractSymbol},blocked:function(){var t=this;return this.blockedMembers.some((function(e){return e.id===t.userid}))},desc_breakLines:function(){return this.group.desc_text.split("\n")},groupJoined:function(){return this.$store.getters["group/ifCurrentGroupJoined"]}},methods:{getInitData:function(){return{isReady:!1,hasPermission:!0,hasMore:!0,posts:[],lastPostId:null,targetCommentPost:null,addCommentShow:!1,grpMembers:[],password:"",blockedMembers:[],showJoinGroup:!1}},resetData:function(){this.isReady=!1,this.hasPermission=!0,this.hasMore=!0,this.posts=[],this.lastPostId=null,this.targetCommentPost=null,this.addCommentShow=!1,this.grpMembers=[],this.password="",this.blockedMembers=[],this.showJoinGroup=!1},fetchGroupData:function(){var t=this;return u()(i.a.mark((function e(){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.resetData(),t.$q.loading.show(),e.next=4,t.getPageData();case 4:t.$q.loading.hide();case 5:case"end":return e.stop()}}),e)})))()},loadMore:function(t,e){return this.hasMore&&this.isReady?void this.getPosts().then(e):e()},showAddComment:function(t){this.groupJoined?(this.targetCommentPost=this.posts.find((function(e){return e.post.id===t})),this.addCommentShow=!0):this.showJoinGroup=!0},onAddArticle:function(){this.reloadList()},onAddComment:function(){this.targetCommentPost.post.num_comment+=1},reloadList:function(){Object.assign(this,{isReady:!1,hasMore:!0,posts:[],lastPostId:null}),this.$nextTick(this.getPosts)},getPageData:function(){var t=this;return Promise.all([this.getGroupMembers(),this.getPosts(),this.$store.dispatch("group/jumpToGroup",{id:this.groupId})]).then((function(){t.isReady=!0})).catch((function(e){e&&100===e.code?t.hasPermission=!1:e&&t.$q.notify(e&&e.message)}))},getPosts:function(){var t=this,e=this.groupId,s=this.userid,n=this.lastPostId;return e?C({userid:s,groupId:e,lastPostId:n}).then((function(e){var s=e.posts;t.posts=t.posts.concat(s),s.length>0?t.lastPostId=s[s.length-1].post.id:t.hasMore=!1})):Promise.reject()},getGroupMembers:function(){var t=u()(i.a.mark((function t(){var e,s;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.groupId){t.next=2;break}return t.abrupt("return",Promise.reject());case 2:return e="/user/members/"+this.groupId,t.next=5,this.$axios.get(e);case 5:s=t.sent,0==s.data.code&&(this.grpMembers=s.data.data.alive.reverse(),this.blockedMembers=s.data.data.blocked);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),shareUrl:function(){var t=this;return u()(i.a.mark((function e(){var s;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s=window.location.href,Object(g["a"])(s).then((function(){t.$q.notify("地址已复制到剪切板")})).catch((function(){t.$q.notify("浏览器不支持，请手动复制地址")}));case 2:case"end":return e.stop()}}),e)})))()},postDeleted:function(t){var e=this.posts.findIndex((function(e){return e.post.id===t}));this.posts.splice(e,1)},postEdited:function(t){var e=this.posts.find((function(e){return e.post.id===t.id}));Object.assign(e.post,t)},wantJoin:function(){this.$refs.join.onClick()}},mounted:function(){this.fetchGroupData()},meta:function(){return{title:this.group.name.substr(0,20),titleTemplate:function(t){return" ".concat(t," - Qroup in DAO (Decentralized Autonomous Organization)")},meta:{description:{name:"description",content:this.group.desc_text.substr(0,60)},keywords:{name:"keywords",content:"DAO Decentralized Autonomous Organization"},equiv:{"http-equiv":"Content-Type",content:"text/html; charset=UTF-8"}},noscript:{default:"Please enable JS or change to other explorer."}}}},I=A,M=(s("960a"),s("2877")),y=s("eebe"),P=s.n(y),R=s("9c40"),Q=s("cb32"),x=s("ef35"),S=s("8380"),J=Object(M["a"])(I,n,r,!1,null,"32d31541",null);e["default"]=J.exports;P()(J,"components",{QBtn:R["a"],QAvatar:Q["a"],QInfiniteScroll:x["a"],QSpinnerDots:S["a"]})},"960a":function(t,e,s){"use strict";var n=s("accb"),r=s.n(n);r.a},accb:function(t,e,s){},caf3:function(t,e){t.exports="data:image/png;base64,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"}}]);